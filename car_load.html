<div class="quickSearch">
    <span>快速搜车</span>

    <!-- car begin -->
    <script language="JavaScript" type="text/javascript">
        var car_load = (function() {
                <!--
                var ascript;
                var ahead;
                // 超时
                var istimeout;
                // 中止
                var isabort;
                var car_onload_serial = function() {
                b_id = G("car_brand").value;
                var url = 'http://car.auto.ifeng.com/lib/car/auto_search/indexduibi_ajax_for_index.php?callback=car_load.result&calltype=list2&id='+b_id+'&s='+(new Date()).getTime();
                istimeout = 1;
                isabort = 1;
                ahead = document.getElementsByTagName('head')[0];
                if (ascript) {
                D_E(ascript);
                }
                ascript = C_E('script');
                setAttr('id', 'ajax_car_script_id', ascript);
                setAttr("type","text/javascript", ascript);
                setAttr('src', url, ascript);
                ahead.appendChild(ascript);
                // 超时处理
                setTimeout(function(){
                        if (istimeout == 1) {
                        isabort = 2;
                        alert('请求超时，请再试一次！');
                        }
                        }, 4000)
                };
                var show_car_result = function(data){
                    if (isabort == 1) {
                        if (data != null) {
                            var sel_dom = G('car_serial');
                            if (sel_dom) {
                                D_E(sel_dom);
                            }
                            sel_dom = C_E('select');
                            sel_opt = C_E('option');
                            sel_opt.innerHTML = '选择车系';
                            sel_dom.appendChild(sel_opt);
                            for (key in data) {
                                sel_opt_grp = C_E('optgroup');
                                setAttr('label', key, sel_opt_grp);
                                sel_dom.appendChild(sel_opt_grp);
                                for (k in data[key]) {
                                    sel_opt = C_E('option');
                                    setAttr('value', data[key][k]['s_id'], sel_opt);
                                    sel_opt.innerHTML = data[key][k]['eng_character']+" "+data[key][k]['name'];
                                    sel_dom.appendChild(sel_opt);
                                }
                            }
                            setAttr('name', 'serial_id', sel_dom);
                            setAttr('id', 'car_serial', sel_dom);
                            insertAfterDOM(sel_dom, G("car_brand"));
                        }
                        istimeout = 2;
                    }
                }
                /**
                 * 获得元素(ID)
                 *
                 * @param   string  val 元素ID
                 * @param   object  dom 要指定的对象
                 * @return  object      指定元素的对象
                 */
                function G(val, dom) {
                    dom = typeof(dom) == 'object' ? dom : window.document;
                    return dom.getElementById(val);
                }
                /**
                 * 创建元素
                 *
                 * @param   string  val 要创建对象的标签名称
                 * @return  object      创建后的对象
                 */
                function C_E(val) {
                    return document.createElement(val);
                }
                /**
                 * 设置元素属性
                 * 
                 * @param   string  name    元素名称
                 * @param   string  val     元素属性
                 * @param   object  dom     元素的对象
                 */
                function setAttr(name, val, dom) {
                    dom.setAttribute(name, val);
                }
                /**
                 * 删除元素
                 * 
                 * @param   object  d_dom   要删除的元素
                 */
                function D_E(d_dom) {
                    d_dom.parentNode.removeChild(d_dom);
                }
                /**
                 * 添加元素到指定元素后面
                 *
                 *  @param  object  n_dom   要添加的元素对象
                 *  @param  object  o_dom   指定添加位置的元素对象
                 */
                function insertAfterDOM(n_dom, o_dom) {
                    var p_dom = o_dom.parentNode;
                    if(p_dom.lastChild == o_dom) {
                        p_dom.appendChild(n_dom);
                    } else {
                        p_dom.insertBefore(n_dom,  o_dom.nextSibling);
                    }            
                }
                return {run:car_onload_serial, result:show_car_result};
        })();
//-->
</script>
<form action="http://car.auto.ifeng.com/lib/car/car_search.php" method="POST"  target="_blank">
    <p>
    <select onchange="car_load.run()" id="car_brand" name="brand_id">
        <option>选择品牌</option>
        <option value="20004">A 奥迪</option> <option value="20002">A 阿尔法·罗米欧</option> <option value="20003">A 阿斯顿·马丁</option> <option value="20006">B 保时捷</option> <option value="20138">B 别克</option> <option value="10004">B 北汽</option> <option value="20109">B 奔腾</option> <option value="20007">B 奔驰</option> <option value="20066">B 宝马</option> <option value="20010">B 宾利</option> <option value="20160">B 布加迪</option> <option value="20063">B 本田</option> <option value="20009">B 标致</option> <option value="10007">B 比亚迪</option> <option value="20161">C 昌河</option> <option value="10037">C 长丰</option> <option value="10012">C 长城</option> <option value="10011">C 长安</option> <option value="10018">D 东南</option> <option value="20111">D 东风</option> <option value="20012">D 大众</option> <option value="20179">D 大发</option> <option value="20148">D 帝豪</option> <option value="20013">D 道奇</option> <option value="20016">F 丰田</option> <option value="20014">F 法拉利</option> <option value="20017">F 福特</option> <option value="10005">F 福田</option> <option value="20015">F 菲亚特</option> <option value="10074">F 飞碟</option> <option value="20099">G GMC</option> <option value="20177">G 广汽</option> <option value="20165">H 华利</option> <option value="10026">H 华普</option> <option value="20054">H 华泰</option> <option value="10027">H 华翔富奇</option> <option value="10023">H 哈飞</option> <option value="20018">H 悍马</option> <option value="10094">H 海马</option> <option value="10025">H 红旗</option> <option value="20182">H 黄海</option> <option value="10030">J Jeep吉普</option> <option value="10029">J 吉利</option> <option value="10028">J 吉奥</option> <option value="20035">J 捷豹</option> <option value="10031">J 江淮</option> <option value="10032">J 江铃</option> <option value="20172">J 金杯</option> <option value="10090">K 克莱斯勒</option> <option value="20021">K 凯迪拉克</option> <option value="20149">K 开瑞</option> <option value="20173">K 柯尼塞格</option> <option value="20023">L 兰博基尼</option> <option value="10076">L 力帆</option> <option value="20224">L 理念</option> <option value="20025">L 劳斯莱斯</option> <option value="20029">L 林肯</option> <option value="20147">L 莲花汽车</option> <option value="20024">L 蓝旗亚</option> <option value="20031">L 路虎</option> <option value="20053">L 铃木</option> <option value="10039">L 陆风</option> <option value="20026">L 雷克萨斯</option> <option value="20027">L 雷诺</option> <option value="20142">M MG名爵</option> <option value="20036">M MINI迷你</option> <option value="20033">M 玛莎拉蒂</option> <option value="20034">M 迈巴赫</option> <option value="20074">M 马自达</option> <option value="10069">N 南汽汽车</option> <option value="10019">N 菲亚特</option> <option value="20037">O 欧宝</option> <option value="20062">O 讴歌</option> <option value="20170">P 帕加尼</option> <option value="20038">P 庞蒂克</option> <option value="20166">Q 全球鹰</option> <option value="10042">Q 奇瑞</option> <option value="10043">Q 起亚</option> <option value="20040">R 日产</option> <option value="20168">R 瑞麒</option> <option value="10089">R 荣威</option> <option value="20020">S smart精灵</option> <option value="20056">S 三菱</option> <option value="20174">S 上海英伦</option> <option value="20169">S 世爵</option> <option value="10053">S 双环</option> <option value="20167">S 双龙</option> <option value="20044">S 斯巴鲁</option> <option value="20045">S 斯柯达</option> <option value="20041">S 萨博</option> <option value="10056">T 天马</option> <option value="20183">W 五菱</option> <option value="20171">W 威兹曼</option> <option value="20176">W 威麟</option> <option value="20001">W 沃尔沃</option> <option value="20046">X 现代</option> <option value="20175">X 西亚特</option> <option value="20047">X 雪佛兰</option> <option value="10065">X 雪铁龙</option> <option value="10060">Y 一汽</option> <option value="20050">Y 英菲尼迪</option> <option value="10073">Z 中兴</option> <option value="10070">Z 中华</option> <option value="10077">Z 众泰</option>
    </select>
    <select id="car_serial">
        <option>选择车系</option>
    </select>
    <input name="button" value="" type="submit" class="btn4" />
    </p>
</form>
<!-- car end -->
        </div>
